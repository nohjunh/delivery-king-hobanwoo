1. 동작 환경
    다음 환경에서 본 SQL문을 작성/실행 했습니다.
    1) Docker 이미지: jaspeen/oracle-de-11g
    2) Oracle 버젼: Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production
    3) SQLPLUS 버젼: PL/SQL Release 11.2.0.2.0 - Production
    4) Oracle SQL Developer 버젼: 22.2.1.234
    5) Oracle SQL Developer 빌드: 234.1810

2. Application 제작 환경
   다음 환경에서 본 JDBC Console-based Applicaton 및 SQL문을 제작/실행 했습니다.
    6) IntelliJ IDEA 2022.2 (Ultimate Edition)
    7) Project SDK: 1.8 Oracle OpenJDK version 1.8.0_202
    8) Project Libraries : 1. ojdbc6, 2. ojdbc8, 3.ojdbc81, 4.orai18n-21.7.0.0


3. 제출물에 대한 실행 및 사용 방법




4. 기능 설명
 본 Console-based Applicaton에서는 사용자용 인터페이스를 다룬다.
  1) 로그인 및 회원가입
      -- 로그인 관련 기능
         1) Applicaton 자체 회원가입 기능을 기본으로 한다.
         2) 회원은 사용자 이름과 비밀번호를 입력하고 Application에서 로그인

      -- 회원가입 관련 기능
         1) 사용자 이름(30자 이내), 비밀번호(15자 이내), 단과대학, 연락처(000-000-0000)를 '#' 단위로 입력을 요청한다.

  2) 내 정보
     -- 내 프로필
        1) 회원의 사용자 이름, 단과대학, 연락처, 멤버십 등급을 출력한다.

     -- 주소 등록하기
        1) 한 명의 회원은 여러 개의 주소를 등록할 수 있어야 한다.
        2) 등록할 주소를 입력받고 회원의 주소 목록에 추가한다.

     -- 내 주소 목록
        1) 등록된 주소 목록들을 보여준다.

     -- 내 쿠폰 목록
        1) 내가 보유하고 있거나, 사용한 모든 쿠폰 목록을 보여준다.
  
  3) 가게 검색
     -- 전체 가게 목록
        1) '배달왕 호반우'에 등록된 모든 업체들의 목록을 보여준다.
        2) 가게 이름, 가게 주소, 카테고리, 전화번호, 가게 설명, 배달 요금, 영업 시간 순으로 출력한다.

     -- 내 단과대학 제휴 업체 목록
        1) 회원이 속한 단과대학과 제휴를 맺은 모든 업체들의 목록을 보여준다.
        2) 가게 이름, 가게 주소, 카테고리, 전화번호, 가게 설명, 배달 요금, 영업 시간 순으로 출력한다.

     -- 카테고리별 가게 목록
        -- 단일 카테고리로 검색하기
	   1) 카테고리는 다음과 같이 분류된다.
	     돈까스·회·일식, 패스트푸드, 카페·디저트, 찜·탕·찌개, 분식, 중식, 양식, 족발·보쌈, 아시안, 학식
      	   2) 카테고리를 입력 받는다.
      	   3) 가게 이름, 가게 주소, 카테고리, 전화번호, 가게 설명, 배달 요금, 영업 시간 순으로 출력한다.
	-- 여러 개의 카테고리로 검색하기
	   1) 여러 개의 카테고리를 '#' 단위로 입력을 요청한다.
	   2) 가게 이름, 가게 주소, 카테고리, 전화번호, 가게 설명, 배달 요금, 영업 시간 순으로 출력한다.

     -- 내 주변 업체 목록
        1) 특정 시, 구, 동 혹은 전체 주소를 입력 받는다.
        2) '배달왕 호반우'에 등록된 모든 업체 중 주소가 일치하는 업체를 보여준다.
        3) 가게 이름, 가게 주소, 카테고리, 전화번호, 가게 설명, 배달 요금, 영업 시간 순으로 출력한다.

     -- 가게 메뉴 목록
        1) 가게에 등록된 모든 메뉴들을 보여준다.
        2) 메뉴가 궁금한 가게 명을 입력 받는다.
        3) 메뉴 이름, 메뉴 설명, 가격 순으로 출력한다.

  4) 주문 하기
        1) '배달왕 호반우'에 등록된 업체에 주문서를 작성한다. 
        2) 가게 이름, 주문 메뉴 개수, 메뉴 이름, 주문 수량, 결제 방식(카드, 현금) 순으로 입력 받는다.
        3) 주문 메뉴 개수만큼 메뉴 이름, 주문 수량을 반복해 입력 받는다.
        4) STATE는 '접수중', ORDER_DATE는 현재 시간을 기준으로 주문이 들어가게 된다.

  5) 내 주문 내역
        1) 회원이 그동안 '배달왕 호반우'를 통해 진행한 모든 주문 내역을 보여준다.
        2) 가게 이름, 결제 수단, 주문 상태, 주문일 순으로 출력한다.

  6) 리뷰
     -- 리뷰 쓰기
        1) 주문 내역 중 '배달완료'로 처리되어 리뷰를 작성할 수 있는 상태인 것들의 목록을 보여준다.
        2) 목록은 주문 번호, 가게 이름, 결제 수단, 주문일 순으로 출력한다.
        3) '배달완료'로 처리된 주문 내역이 없다면 안내 메세지를 보여준다.
        4) 목록 중 리뷰를 남길 주문 번호를 입력 받는다.
        5) 별점(1~5), 내용을 입력 받아 리뷰 작성을 완료한다.

     -- 리뷰 수정
        1) 회원이 작성한 모든 리뷰 목록을 보여준다.
        2) 목록은 리뷰 번호, 작성자, 가게 이름, 별점, 내용, 작성 시간 순으로 출력한다.
        3) 목록 중 수정할 리뷰 번호를 입력 받는다.
        4) 별점(1~5), 내용을 입력 받아 리뷰 수정을 완료한다.

     -- 리뷰 삭제
        1) 회원이 작성한 모든 리뷰 목록을 보여준다.
        2) 목록은 리뷰 번호, 작성자, 가게 이름, 별점, 내용, 작성 시간 순으로 출력한다.
        3) 목록 중 삭제할 리뷰 번호를 입력 받는다.
        4) 해당 리뷰 삭제를 완료한다.

     -- 내가 쓴 리뷰
        1) 회원이 작성한 모든 리뷰 목록을 보여준다.

     -- 특정 가게 리뷰 조회
        1) '배달왕 호반우'에 등록된 가게 중 리뷰를 조회할 가게 이름을 입력 받는다.
        2) 리뷰 번호, 작성자, 가게 이름, 별점, 내용, 작성 시간 순으로 출력한다.

     -- 아직 리뷰를 작성하지 않은 주문 내역
        1) 주문 내역 중 '배달완료'로 처리되었지만 아직 리뷰를 작성하지 않은 주문 목록을 보여준다.
        2) 주문 번호, 가게 이름, 결제 수단, 주문일 순으로 출력한다.


5. 유의 사항
  1) window에서 실행 했을 때, 지원되지 않는 문자 집합: KO16MSWIN949 ERROR 발생할 경우
     클래스 경로에 orai18n.jar 추가



6. Phase2에서 작성한 쿼리 20개 중 Phase3를 수행함에 있어 동적 프레디킷에 따라 수정된 쿼리 사항
-- 1 --
Before: User_ID가 1인 USERS가 가지고 있는 Coupon 정보 조회 (Phase2 Type1-2)
After: 내 Coupon 정보 조회 (Phase3)
-- 2 --
Before: User_ID가 1인 USERS가 속한 DEPARTMENT와 제휴된 전체 STORE 정보 (Phase2 Type2-1)
After: 내가 속한 단과 대학 제휴 업체 목록 조회 (Phase3)
순서: 로그인 -> 가게 검색 -> 내 단과대학 제휴 업체 목록
-- 3 --
Before: ‘산격로’에 속하는 Store의 이름, 판매하는 메뉴 이름과 가격 정보 조회 (Phase2 Type6-1)
After: 입력된 주소에 속하는 가게 정보 조회 (Phase3)
순서: 로그인 -> 가게 검색 -> 내 주변 업체 목록
-- 4 --
Before: User_ID가 2인 USER가 리뷰를 작성한 모든 Store 정보 (Phase2 Type2-2)
After: 내가 작성한 리뷰 정보 조회 (Phase3)
순서: 로그인 -> 리뷰 -> 내가 쓴 리뷰
-- 5 --
Before: 리뷰를 쓴 적 있는 유저 ID와 이름 조회 (Phase2 Type5-2)
After: 가게명으로 리뷰 정보 조회 (Phase3)
순서: 로그인 -> 리뷰 -> 특정 가게 리뷰 내역
-- 6 --
Before: User_ID가 2인 USER가 현재까지 주문을 진행한 총 횟수 (Phase2 Type3-1)
After: 현재까지 주문한 총 횟수에 따라 멤버십티어 업데이트 (Phase3)
-- 7 --
Type1을 만족하는 새로 추가된 쿼리
Add: 내 리뷰 목록 조회 (Phase3)
  SELECT * FROM REVIEW WHERE ORDER_ID = ?;
-- 8 --
Type5를 만족하는 새로 추가된 쿼리
Add: 아직 리뷰를 작성하지 않은 주문 내역 조회 (Phase3)
  SELECT *
  FROM ORDERS O, USERS U
  WHERE
  U.USER_ID= O.USER_ID AND
  U.USER_ID= ? AND
  O.STATE='배달완료' AND
  NOT EXISTS (SELECT *
                   FROM CONTAINS C
                   WHERE C.ORDER_ID=O.ORDER_ID );
-- 9 --
Type10을 만족하는 새로 추가된 쿼리
Add: 여러 개의 카테고리로 검색하기 (Phase3)
  SELECT * FROM STORE 
  WHERE FOOD_CATEGORY =?
  UNION
  SELECT * FROM STORE 
  WHERE FOOD_CATEGORY =?
-- 10 --
Type10을 만족하는 새로 추가된 쿼리
Add: 내 주문 내역 중 '배달완료'로 처리되어 리뷰를 쓸 수 있는 주문 목록 조회 (Phase3)
  SELECT * FROM ORDERS WHERE USER_ID = ? INTERSECT SELECT * FROM ORDERS WHERE STATE = '배달 완료'


6. Phase2에서 Phase3를 수행함에 있어 수정된 DDL
   1) USERS table의 User_Name attribute를 UNIQUE로 추가